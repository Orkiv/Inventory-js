function loadjscssfile(a,b){if("js"==b){var c=document.createElement("script");c.setAttribute("type","text/javascript"),c.setAttribute("src",a)}else if("css"==b){var c=document.createElement("link");c.setAttribute("rel","stylesheet"),c.setAttribute("type","text/css"),c.setAttribute("href",a)}"undefined"!=typeof c&&document.getElementsByTagName("head")[0].appendChild(c)}function makeid(a){for(var b="",c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",d=0;d<a;d++)b+=c.charAt(Math.floor(Math.random()*c.length));return b}function bindTagsInv(){for(var a=document.getElementsByClassName("sync-orkivinv"),b=a.length-1;b>=0;b--){var c=a[b],d=c.dataset.type;console.log(d),document.getElementsByClassName("sync-orkivinv")[b].onclick=function(){return console.log("event"),!1}}}function hideInventoryModal(){var a=document.getElementsByClassName("inv-to-fade");a[0].className=a[0].className.replace("faded",""),a[1].className=a[1].className.replace("faded",""),$inventoryStandard.modal=!1,document.getElementById("InventoryIframe").src="https://orkiv.com/i/loading.php"}function Inventory(a,b,c,d){this.accountid=a,this.jstoken=b,this.modal=!1,this.alerts=!0,this.syncdynamic=!0,"undefined"!=typeof c&&(this.alerts=c),"undefined"!=typeof d&&(this.syncdynamic=d),loadjscssfile("https://orkiv.com/i/ext_css.css","css"),loadjscssfile("https://maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css","css"),window.localStorage?(window.localStorage.inventoryID?console.log("Restoring session"):(window.localStorage.inventoryID=makeid(25),window.localStorage.inventoryData=JSON.stringify({cart:[],wishlist:[]})),this.SyncDynamic(),this.xFetch("https://www.orkiv.com/i/ext_js.php",{},"POST",function(a){document.getElementsByTagName("body")[0].innerHTML+=a})):console.log("No local storage support!, will use ext_js of Orkiv"),$inventoryStandard=this}var ready=function(){function e(){if(!d.isReady){try{document.documentElement.doScroll("left")}catch(a){return void setTimeout(e,1)}d.ready()}}function f(b){d.bindReady();d.type(b);a.done(b)}var a,b,c={};c["[object Boolean]"]="boolean",c["[object Number]"]="number",c["[object String]"]="string",c["[object Function]"]="function",c["[object Array]"]="array",c["[object Date]"]="date",c["[object RegExp]"]="regexp",c["[object Object]"]="object";var d={isReady:!1,readyWait:1,holdReady:function(a){a?d.readyWait++:d.ready(!0)},ready:function(b){if(b===!0&&!--d.readyWait||b!==!0&&!d.isReady){if(!document.body)return setTimeout(d.ready,1);if(d.isReady=!0,b!==!0&&--d.readyWait>0)return;a.resolveWith(document,[d])}},bindReady:function(){if(!a){if(a=d._Deferred(),"complete"===document.readyState)return setTimeout(d.ready,1);if(document.addEventListener)document.addEventListener("DOMContentLoaded",b,!1),window.addEventListener("load",d.ready,!1);else if(document.attachEvent){document.attachEvent("onreadystatechange",b),window.attachEvent("onload",d.ready);var c=!1;try{c=null==window.frameElement}catch(a){}document.documentElement.doScroll&&c&&e()}}},_Deferred:function(){var b,c,e,a=[],f={done:function(){if(!e){var g,h,i,j,k,c=arguments;for(b&&(k=b,b=0),g=0,h=c.length;g<h;g++)i=c[g],j=d.type(i),"array"===j?f.done.apply(f,i):"function"===j&&a.push(i);k&&f.resolveWith(k[0],k[1])}return this},resolveWith:function(d,f){if(!e&&!b&&!c){f=f||[],c=1;try{for(;a[0];)a.shift().apply(d,f)}finally{b=[d,f],c=0}}return this},resolve:function(){return f.resolveWith(this,arguments),this},isResolved:function(){return!(!c&&!b)},cancel:function(){return e=1,a=[],this}};return f},type:function(a){return null==a?String(a):c[Object.prototype.toString.call(a)]||"object"}};return document.addEventListener?b=function(){document.removeEventListener("DOMContentLoaded",b,!1),d.ready()}:document.attachEvent&&(b=function(){"complete"===document.readyState&&(document.detachEvent("onreadystatechange",b),d.ready())}),f}(),serialize=function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(encodeURIComponent(c)+"="+encodeURIComponent(a[c]));return b.join("&")},stripeMod="";$inventoryStandard={},Inventory.prototype.Data=function(){return this.getLocal("inventoryData",!0)},Inventory.prototype.SyncDynamic=function(){if(this.syncdynamic){for(var a=document.getElementsByClassName("sync-dynamic"),b=a.length-1;b>=0;b--)"cart"==a[b].dataset.link?this.In(a[b].dataset.link,a[b].dataset.id)?a[b].innerHTML="<i class='fa fa-shopping-cart'></i> Remove from cart":a[b].innerHTML="<i class='fa fa-shopping-cart'></i> Add to cart":"wishlist"==a[b].dataset.link&&(this.In(a[b].dataset.link,a[b].dataset.id)?a[b].innerHTML="<i class='fa fa-bars'></i> Remove from Wishlist":a[b].innerHTML="<i class='fa fa-bars'></i> Wishlist");setTimeout(function(){for(var a=$inventoryStandard.Data(),b=a.cart.length-1;b>=0;b--)for(var c=a.cart[b],d=document.getElementsByClassName("inventory-form-group"),e=d.length-1;e>=0;e--)if(d[e].dataset.id==c.id&&"cart"==d[e].dataset.type)for(var f=d[e].childNodes.length-1;f>=0;f--)d[e].childNodes[f].dataset&&"amt"==d[e].childNodes[f].dataset.isf&&(d[e].childNodes[f].value=c.quantity+"")},1500)}},Inventory.prototype.ExplicitCart=function(a,b){for(var c=document.getElementsByClassName("inventory-form-group"),d=c.length-1;d>=0;d--)if(c[d].dataset.id==a&&"cart"==c[d].dataset.type)for(var e=c[d].childNodes.length-1;e>=0;e--)if(c[d].childNodes[e].dataset&&"amt"==c[d].childNodes[e].dataset.isf){var f=parseInt(c[d].childNodes[e].value);f>0?this.Cart(a,f,b):this.RemoveFromCart(this.GenID(a,b))}},Inventory.prototype.ExplicitBuy=function(a,b){for(var c=document.getElementsByClassName("inventory-form-group"),d=c.length-1;d>=0;d--)if(c[d].dataset.id==a&&"buy"==c[d].dataset.type)for(var e=c[d].childNodes.length-1;e>=0;e--)if(c[d].childNodes[e].dataset&&"amt"==c[d].childNodes[e].dataset.isf){console.log(c[d].childNodes[e]);var f=parseInt(c[d].childNodes[e].value);""==c[d].childNodes[e].value&&(f=1),this.Buy(a,f,b)}},Inventory.prototype.In=function(a,b){var c=this.Data();if("cart"==a){for(var d=c.cart.length-1;d>=0;d--)if(c.cart[d].id==b)return!0}else if("wishlist"==a)for(var d=c.wishlist.length-1;d>=0;d--)if(c.wishlist[d].id==b)return!0;return!1},Inventory.prototype.HideAlert=function(a){for(var b=document.getElementsByClassName("inventory-alert"),c=b.length-1;c>=0;c--)b[c].dataset.id==a&&b[c].parentNode.removeChild(b[c])},Inventory.prototype.Alert=function(a){if(this.alerts){var b=makeid(10),c='<div class="inventory-alert to-fade" data-id="'+b+'"><button onclick="$inventoryStandard.HideAlert(\''+b+'\')" class="sync-orkivinv" style="color:#fff !important;">Got it</button><p style="    background: #333;color: #fff;  padding: 6px;">'+a+"</p></div>";document.getElementsByTagName("body")[0].innerHTML+=c,setTimeout(function(){for(var a=document.getElementsByClassName("inventory-alert"),c=a.length-1;c>=0;c--)a[c].dataset.id==b&&(a[c].className+=" faded")},1e3)}else this.customalert&&this.customalert(a)},Inventory.prototype.SetAlert=function(a){this.customalert=a,$inventoryStandard.customalert=a},Inventory.prototype.RemoveFromCart=function(a){var b=this.getLocal("inventoryData",!0),c=[];if(a)for(var e=b.cart.length-1;e>=0;e--)b.cart[e].id!=a&&c.push(b.cart[e]);b.cart=c,this.Alert("Cart Updated!"),this.saveLocal("inventoryData",b,!0),this.SyncDynamic()},Inventory.prototype.RemoveFromWishlist=function(a){var b=this.getLocal("inventoryData",!0),c=[];if(a)for(var e=b.cart.length-1;e>=0;e--)b.cart[e].id!=a&&c.push(b.cart[e]);b.wishlist=c,this.Alert("Wishlist Updated!"),this.saveLocal("inventoryData",b,!0),this.SyncDynamic()},Inventory.prototype.GenID=function(a,b){return b.length>0&&(a+=a+"%^}"+b.join("%^}")),a},Inventory.prototype.Cart=function(a,b,c){var d=this.getLocal("inventoryData",!0);if(0==b&&(b=1),!a)return d.cart;var e=!1;c.length>0&&(a+="%^}"+c.join("%^}"));for(var f=d.cart.length-1;f>=0;f--)if(d.cart[f].id==a){e=!0;var g=d.cart[f];g.quantity+=b,d.cart[f]=g}e?this.RemoveFromCart(a):(this.Alert("Cart Updated!"),d.cart.push({id:a,quantity:b,variations:c}),this.saveLocal("inventoryData",d,!0)),this.SyncDynamic()},Inventory.prototype.addCart=function(a,b,c){var d=this.getLocal("inventoryData",!0);if(0==b&&(b=1),!a)return d.cart;var e=!1;c.length>0&&(a+="%^}"+c.join("%^}"));for(var f=d.cart.length-1;f>=0;f--)if(d.cart[f].id==a){e=!0;var g=d.cart[f];g.quantity+=b,d.cart[f]=g}e||(this.Alert("Cart Updated!"),d.cart.push({id:a,quantity:b,variations:c})),this.saveLocal("inventoryData",d,!0)},Inventory.prototype.ShowCart=function(){var a=this.getLocal("inventoryData",!0);if(0==a.cart.length)this.Alert("Cart empty!"),console.log("Cart empty");else{this.showModal();for(var b="https://www.orkiv.com/i/cart-checkout"+stripeMod+"/?"+this.accountid+"=",a=this.getLocal("inventoryData",!0),c=[],d=a.cart.length-1;d>=0;d--){var e=a.cart[d],f=e.id;c.push(f+"="+e.quantity),b+=f,0!=d&&(b+=",")}b+="&";for(var d=c.length-1;d>=0;d--)b+=c[d],0!=d&&(b+="&");document.getElementById("InventoryIframe").src=b}},Inventory.prototype.showModal=function(){if(!this.modal&&0==document.getElementsByClassName("inventory-alert").length){var a=document.getElementsByClassName("inv-to-fade");a[0].className+=" faded",a[1].className+=" faded",this.modal=!0}},Inventory.prototype.hideModal=function(){var a=document.getElementsByClassName("inv-to-fade");a[0].className=a[0].className.replace("faded",""),a[1].className=a[1].className.replace("faded",""),this.modal=!1,document.getElementById("InventoryIframe").src="https://orkiv.com/i/loading.php"},Inventory.prototype.ShowWishlist=function(){this.showModal();for(var a="https://www.orkiv.com/i/render-bookmarks/?"+this.accountid+"=",b=this.getLocal("inventoryData",!0),c=b.wishlist.length-1;c>=0;c--){var d=b.wishlist[c],e=d.id;a+=e,0!=c&&(a+=",")}document.getElementById("InventoryIframe").src=a},Inventory.prototype.Wishlist=function(a,b){var c=this.getLocal("inventoryData",!0);if(!a)return c.wishlist;var d=!1;b.length>0&&(a+="%^}"+b.join("%^}"));for(var e=c.wishlist.length-1;e>=0;e--)c.wishlist[e].id==a&&(d=!0);d?this.RemoveFromWishlist(a):(this.Alert("Wishlist Updated!"),c.wishlist.push({id:a,variations:b}),this.saveLocal("inventoryData",c,!0)),this.SyncDynamic()},Inventory.prototype.Buy=function(a,b,c){this.showModal();var d="https://www.orkiv.com/i/cart-checkout"+stripeMod+"/?"+this.accountid+"=";0==b&&(b=1);var e=a+"";c.length>0&&(e+="%^}");for(var f=c.length-1;f>=0;f--)e+=c[f],0!=f&&(e+="%^}");d+=e+"&"+e+"="+b,document.getElementById("InventoryIframe").src=d},Inventory.prototype.BuyService=function(a){this.showModal();var b="https://www.orkiv.com/i/service-checkout"+stripeMod+"/?"+this.accountid+"=",c=a+"";b+=c,document.getElementById("InventoryIframe").src=b},Inventory.prototype.Checkout=function(){this.ShowCart()},Inventory.prototype.saveLocal=function(a,b,c){c?window.localStorage[a]=JSON.stringify(b):window.localStorage[a]=b},Inventory.prototype.getLocal=function(a,b){return b?JSON.parse(window.localStorage[a]):window.localStorage[a]},Inventory.prototype.xFetch=function(a,b,c,d){var e=new XMLHttpRequest;e.onreadystatechange=function(){4==e.readyState&&200==e.status&&d(e.responseText)},e.open(c,a,!0),b&&(b.owner=this.accountid,b.jstoken=this.jstoken,b.client=window.localStorage.inventoryID),"POST"==c?(e.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e.send(serialize(b))):e.send()};